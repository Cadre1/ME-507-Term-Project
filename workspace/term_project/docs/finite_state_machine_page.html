<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ME 507 Heliostat Term Project: Finite State Machines</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">ME 507 Heliostat Term Project
   </div>
   <div id="projectbrief">Group 6&#39;s Term Project</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('finite_state_machine_page.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Finite State Machines</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The <a class="el" href="main_8c.html" title=": Main program body for debugging and main task operations">main.c</a> program provided in this documentation contains two tasks, Radio Receiving and Main Control, that follow the two finite state machines as seen below.</p>
<p>The Radio Receiving task is used to start the Main Control program and is also used as a deadman's switch for an E-stop. The states are as follows:</p><ul>
<li>S0 Init: Initializes the required pins and flags used for the radio receiver.</li>
<li>S1 Off: Waits for an input from the radio receiver and determines if the trigger is greater than 50% pressed down to start the Main Control program.</li>
<li>S2 On: Waits for another input from the radio receiver and determines if the trigger is less than 50% pressed down to stop the Main Control Program.</li>
</ul>
<p>The Main Control task manages the turning, light source detecting, and retargeting of the heliostat and is constantly checking the Radio Receiving task flag for changes in trigger outputs. The states are as follows:</p><ul>
<li>S0 Init Power: Initializes the required pins, timers, I2C channels, ADCs, drivers, controller variables, and miscellaneous setting variables for the panning motor, encoder, photoresistors, IMU, and servo.</li>
<li>S1 Wait For Start: Waits until the radio receiver receives a valid output to start.</li>
<li>S2 Setup 1: Sets the position of the servo to 60 degrees from vertical and makes one full revolution using gyroscope-motor position control and records initial high voltage values and angles to get a general position of the light source.</li>
<li>S3 Setup 2: Sets the initial motor position to one of the high light source positions using gyroscope-motor position control.</li>
<li>S4 Pan To Bright Spot: Determines where the brightest spot is using horizontal photoresistors voltage difference for photoresistor-motor position control.</li>
<li>S5 Pitch To Bright Spot: Determines where the brightest spot is using vertical photoresistors voltage difference for photoresistor-servo position control.</li>
<li>S6 Collect Angle: Stops and calculates the Euler angles of the bright spot using the bright spot angle and location of the reflection target.</li>
<li>S7 Go To Reflection Angles: Pans to the reflection angle using gyroscope-motor position control and setting the servo angle.</li>
<li>S8 Stop: Stops the operation when the radio receiver has an invalid input.</li>
<li>S9 Return: Pans and pitches back to the home angle using gyroscope-motor position control.</li>
</ul>
<div class="image">
<img src="task1FSM.png" alt=""/>
<div class="caption">
Radio Receiving Task</div></div>
 <div class="image">
<img src="task2FSM.png" alt=""/>
<div class="caption">
Main Control Task</div></div>
 </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="index.html">ME 507 Heliostat Term Project</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0 </li>
  </ul>
</div>
</body>
</html>
