/*!
 * @file servo_driver.h
 * @brief Sets up the servo driver structure
 *
 *  Created on: May 30, 2024
 *  @author Evan Anthony
 */

#ifndef INC_SERVO_DRIVER_H_
#define INC_SERVO_DRIVER_H_

#include <stdio.h>
#include <stdint.h>
#include "stm32f4xx_hal.h"

/*!
 *  @struct 	Servo Driver
 *	@typedef 	Servo_DriverTypeDef
 *  @brief 		A structure to contain the variables of the servo driver typedefs
 *	@param 		*pwmHandle: The PWM output timer handle
 *	@param 		tim_ch: The PWM output timer channel
 *	@param		current_CCR: The current pulse value
 *	@param		timer_ARR: The timer auto reload value
 */
struct {
	TIM_HandleTypeDef* pwmHandle;
	uint32_t timer_ch;
	uint32_t current_CCR;
	uint32_t timer_ARR;
} typedef Servo_DriverTypeDef;

// PROTOTYPES:

void enable_servo(Servo_DriverTypeDef* servo);
void disable_servo(Servo_DriverTypeDef* servo);
float servo_get_position(Servo_DriverTypeDef* servo);
void servo_set_position(Servo_DriverTypeDef* servo, float angle);
void servo_change_relative_PW(Servo_DriverTypeDef* servo, float PW);


#endif /* INC_SERVO_DRIVER_H_ */
